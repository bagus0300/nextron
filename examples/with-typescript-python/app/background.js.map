{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./main/addPython.ts","webpack:///./main/background.ts","webpack:///./main/helpers/create-window.ts","webpack:///./main/helpers/enable-hot-reload.ts","webpack:///./main/helpers/index.ts","webpack:///external \"child_process\"","webpack:///external \"electron\"","webpack:///external \"fs\"","webpack:///external \"fs-jetpack\"","webpack:///external \"path\"","webpack:///external \"url\""],"names":[],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main/background.ts\");\n","import { app } from \"electron\";\r\nimport * as path from \"path\";\r\n\r\nconst PY_DIST_FOLDER = \"pythondist\";\r\nconst PY_FOLDER = \"python\";\r\nconst PY_MODULE = \"api\"; // without .py suffix\r\n\r\nlet pyProc = null;\r\nlet pyPort = null;\r\n\r\nconst guessPackaged = () => {\r\n  const fullPath = path.join(__dirname, PY_DIST_FOLDER);\r\n  return require(\"fs\").existsSync(fullPath);\r\n};\r\n\r\nconst getScriptPath = () => {\r\n  if (!guessPackaged()) {\r\n    console.log(\"TODO DEBUG guessing electron is not packaged\");\r\n    return path.join(__dirname, PY_FOLDER, PY_MODULE + \".py\");\r\n  }\r\n  console.log(\"TODO DEBUG guessing electron is packaged\");\r\n  if (process.platform === \"win32\") {\r\n    return path.join(__dirname, PY_DIST_FOLDER, PY_MODULE, PY_MODULE + \".exe\");\r\n  }\r\n  return path.join(__dirname, PY_DIST_FOLDER, PY_MODULE, PY_MODULE);\r\n};\r\n\r\nconst selectPort = () => {\r\n  pyPort = 4242;\r\n  return pyPort;\r\n};\r\n\r\nconst createPyProc = () => {\r\n  const script = getScriptPath();\r\n  const port = \"\" + selectPort();\r\n\r\n  pyProc = (guessPackaged()) ? require(\"child_process\").execFile(script, [port]) : require(\"child_process\").spawn(\"python\", [script, port]);\r\n\r\n  if (pyProc != null) {\r\n    console.log(\"child process success on port \" + port);\r\n  }\r\n};\r\n\r\nconst exitPyProc = () => {\r\n  pyProc.kill();\r\n  pyProc = null;\r\n  pyPort = null;\r\n};\r\n\r\nconst addPython = () => {\r\n  app.on(\"ready\", createPyProc);\r\n  app.on(\"will-quit\", exitPyProc);\r\n};\r\n\r\nexport { addPython };\r\n","import { app } from \"electron\";\r\nimport { join } from \"path\";\r\nimport { format } from \"url\";\r\nimport { addPython } from \"./addPython\";\r\nimport { createWindow, enableHotReload } from \"./helpers\";\r\n\r\nconst env = require(\"env\");\r\nconst isProd = (env.name === \"production\");\r\n\r\nif (!isProd) {\r\n  enableHotReload();\r\n  const userDataPath = app.getPath(\"userData\");\r\n  app.setPath(\"userData\", `${userDataPath} (${env.name})`);\r\n}\r\n\r\naddPython();\r\napp.on(\"ready\", () => {\r\n  const mainWindow = createWindow(\"main\", {\r\n    height: 600,\r\n    width: 1000,\r\n  });\r\n\r\n  const homeUrl = isProd ? format({\r\n    pathname: join(__dirname, \"home/index.html\"),\r\n    protocol: \"file:\",\r\n    slashes: true,\r\n  }) : \"http://localhost:8888/home\";\r\n\r\n  mainWindow.loadURL(homeUrl);\r\n\r\n  // if (!isProd) {\r\n  //   mainWindow.webContents.openDevTools();\r\n  // }\r\n});\r\n\r\napp.on(\"window-all-closed\", () => {\r\n  app.quit();\r\n});\r\n","import {\r\n  app,\r\n  BrowserWindow,\r\n  BrowserWindowConstructorOptions,\r\n  screen,\r\n} from \"electron\";\r\nimport * as jetpack from \"fs-jetpack\";\r\n\r\nexport default (name:string, options:BrowserWindowConstructorOptions):BrowserWindow => {\r\n  const userDataDir = jetpack.cwd(app.getPath(\"userData\"));\r\n  const stateStoreFile = `window-state-${name}.json`;\r\n  const defaultSize = {\r\n    height: options.height,\r\n    width: options.width,\r\n  };\r\n\r\n  let state = {};\r\n  let win;\r\n\r\n  const restore = () => {\r\n    let restoredState = {};\r\n    try {\r\n      restoredState = userDataDir.read(stateStoreFile, \"json\");\r\n    } catch (err) {\r\n      // For some reason json can't be read (might be corrupted).\r\n      // No worries, we have defaults.\r\n    }\r\n    return Object.assign({}, defaultSize, restoredState);\r\n  };\r\n\r\n  const getCurrentPosition = () => {\r\n    const position = win.getPosition();\r\n    const size = win.getSize();\r\n    return {\r\n      height: size[1],\r\n      width: size[0],\r\n      x: position[0],\r\n      y: position[1],\r\n    };\r\n  };\r\n\r\n  const windowWithinBounds = (windowState, bounds) => {\r\n    return (\r\n      windowState.x >= bounds.x &&\r\n      windowState.y >= bounds.y &&\r\n      windowState.x + windowState.width <= bounds.x + bounds.width &&\r\n      windowState.y + windowState.height <= bounds.y + bounds.height\r\n    );\r\n  };\r\n\r\n  const resetToDefaults = () => {\r\n    const bounds = screen.getPrimaryDisplay().bounds;\r\n    return Object.assign({}, defaultSize, {\r\n      x: (bounds.width - defaultSize.width) / 2,\r\n      y: (bounds.height - defaultSize.height) / 2,\r\n    });\r\n  };\r\n\r\n  const ensureVisibleOnSomeDisplay = (windowState) => {\r\n    const visible = screen.getAllDisplays().some((display) => {\r\n      return windowWithinBounds(windowState, display.bounds);\r\n    });\r\n    if (!visible) {\r\n      // Window is partially or fully not visible now.\r\n      // Reset it to safe defaults.\r\n      return resetToDefaults();\r\n    }\r\n    return windowState;\r\n  };\r\n\r\n  const saveState = () => {\r\n    if (!win.isMinimized() && !win.isMaximized()) {\r\n      Object.assign(state, getCurrentPosition());\r\n    }\r\n    userDataDir.write(stateStoreFile, state, { atomic: true });\r\n  };\r\n\r\n  state = ensureVisibleOnSomeDisplay(restore());\r\n\r\n  const browserOptions:BrowserWindowConstructorOptions = {\r\n    ...options,\r\n    ...state,\r\n  };\r\n  win = new BrowserWindow(browserOptions);\r\n\r\n  win.on(\"close\", saveState);\r\n\r\n  return win;\r\n};\r\n","import { app } from \"electron\";\r\nimport { watchFile } from \"fs\";\r\nimport { join } from \"path\";\r\n\r\nexport default function enableHotReload():void {\r\n  watchFile(join(process.cwd(), \"app/background.js\"), () => {\r\n    app.relaunch();\r\n    app.exit(0);\r\n  });\r\n}\r\n","import createWindow from \"./create-window\";\r\nimport enableHotReload from \"./enable-hot-reload\";\r\n\r\nexport {\r\n  createWindow,\r\n  enableHotReload,\r\n};\r\n","module.exports = require(\"child_process\");","module.exports = require(\"electron\");","module.exports = require(\"fs\");","module.exports = require(\"fs-jetpack\");","module.exports = require(\"path\");","module.exports = require(\"url\");"],"sourceRoot":""}